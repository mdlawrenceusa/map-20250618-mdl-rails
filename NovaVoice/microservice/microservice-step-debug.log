[32minfo[39m: VonageService initialized {"outboundNumber":"+12135235735","timestamp":"2025-06-22T00:40:37.133Z","webhookBaseUrl":"https://gospelshare.io"}
[32minfo[39m: NovaSonicBidirectionalStreamClient initialized {"timestamp":"2025-06-22T00:40:37.143Z"}
[32minfo[39m: Microservice running on http://0.0.0.0:3000 {"timestamp":"2025-06-22T00:40:37.150Z"}
[32minfo[39m: WebSocket server available on ws://0.0.0.0:3000/ws {"timestamp":"2025-06-22T00:40:37.150Z"}
[32minfo[39m: Environment: {"awsRegion":"us-east-1","outboundNumber":"+12135235735","timestamp":"2025-06-22T00:40:37.150Z","webhookBaseUrl":"https://gospelshare.io"}
[32minfo[39m: Vonage inbound event {"body":{"conversation_uuid":"CON-dc2e6661-1205-4ccd-895e-8e17ffa99f67","direction":"inbound","from":"13472005533","headers":{},"status":"ringing","timestamp":"2025-06-22T00:40:44.419Z","to":"12135235700","uuid":"e2d7f951a44ad6c6b7a736578fc062c9"},"timestamp":"2025-06-22T00:40:44.615Z"}
[32minfo[39m: Vonage inbound event {"body":{"conversation_uuid":"CON-dc2e6661-1205-4ccd-895e-8e17ffa99f67","direction":"inbound","from":"13472005533","headers":{},"status":"started","timestamp":"2025-06-22T00:40:44.419Z","to":"12135235700","uuid":"e2d7f951a44ad6c6b7a736578fc062c9"},"timestamp":"2025-06-22T00:40:44.625Z"}
[32minfo[39m: Vonage inbound answer webhook {"callId":"e2d7f951a44ad6c6b7a736578fc062c9","conversation_uuid":"CON-dc2e6661-1205-4ccd-895e-8e17ffa99f67","from":"13472005533","query":{"conversation_uuid":"CON-dc2e6661-1205-4ccd-895e-8e17ffa99f67","endpoint_type":"phone","from":"13472005533","region_url":"https://api-us-3.vonage.com","to":"12135235700","uuid":"e2d7f951a44ad6c6b7a736578fc062c9"},"timestamp":"2025-06-22T00:40:44.704Z","to":"12135235700"}
[32minfo[39m: BedrockService initialized {"modelId":"amazon.nova-sonic-v1:0","region":"us-east-1","timestamp":"2025-06-22T00:40:44.706Z"}
[32minfo[39m: AudioProcessor initialized {"timestamp":"2025-06-22T00:40:44.707Z"}
[32minfo[39m: Vonage inbound event {"body":{"conversation_uuid":"CON-dc2e6661-1205-4ccd-895e-8e17ffa99f67","direction":"inbound","from":"13472005533","headers":{},"network":null,"rate":null,"start_time":null,"status":"answered","timestamp":"2025-06-22T00:40:44.787Z","to":"12135235700","uuid":"e2d7f951a44ad6c6b7a736578fc062c9"},"timestamp":"2025-06-22T00:40:44.814Z"}
[32minfo[39m: WebSocket connection attempt {"callId":"e2d7f951a44ad6c6b7a736578fc062c9","headers":{"cloudfront-forwarded-proto":"https","cloudfront-is-desktop-viewer":"true","cloudfront-is-mobile-viewer":"false","cloudfront-is-smarttv-viewer":"false","cloudfront-is-tablet-viewer":"false","cloudfront-viewer-asn":"14618","cloudfront-viewer-country":"US","connection":"upgrade","host":"gospelshare.io","origin":"wss://gospelshare.io","sec-websocket-key":"SekMChvHIhU+AVscOy+2rw==","sec-websocket-protocol":"WSBRIDGE","sec-websocket-version":"13","upgrade":"websocket","user-agent":"WSBridgeV2","via":"1.1 f834d7a8432d533e6acda53d29e6cec6.cloudfront.net (CloudFront)","x-amz-cf-id":"HGkjtdkipwidK6S1GN6BzyHQKvcUaROBMaOyIYIFkk0X9vuO-oYVOw==","x-forwarded-for":"216.147.2.130"},"pathname":"/socket","searchParams":{"channel":"e2d7f951a44ad6c6b7a736578fc062c9"},"timestamp":"2025-06-22T00:40:50.780Z","url":"/socket?channel=e2d7f951a44ad6c6b7a736578fc062c9"}
[32minfo[39m: WebSocket connected {"callId":"e2d7f951a44ad6c6b7a736578fc062c9","timestamp":"2025-06-22T00:40:50.781Z"}
[32minfo[39m: üöÄ STEP 1: Creating stream session {"callId":"e2d7f951a44ad6c6b7a736578fc062c9","timestamp":"2025-06-22T00:40:50.781Z"}
[32minfo[39m: ‚úÖ STEP 1 COMPLETE: Stream session created {"callId":"e2d7f951a44ad6c6b7a736578fc062c9","timestamp":"2025-06-22T00:40:50.781Z"}
[32minfo[39m: üéß STEP 2: Setting up event handlers {"callId":"e2d7f951a44ad6c6b7a736578fc062c9","timestamp":"2025-06-22T00:40:50.782Z"}
[32minfo[39m: ‚úÖ STEP 2 COMPLETE: Event handlers set {"callId":"e2d7f951a44ad6c6b7a736578fc062c9","timestamp":"2025-06-22T00:40:50.782Z"}
[32minfo[39m: üîó STEP 3: Initiating Nova Sonic session (this may take time...) {"callId":"e2d7f951a44ad6c6b7a736578fc062c9","timestamp":"2025-06-22T00:40:50.782Z"}
[32minfo[39m: Starting bidirectional stream for session e2d7f951a44ad6c6b7a736578fc062c9... {"timestamp":"2025-06-22T00:40:50.783Z"}
[32minfo[39m: Vonage inbound event {"body":{"conversation_uuid":"CON-dc2e6661-1205-4ccd-895e-8e17ffa99f67","direction":"outbound","from":"Esther - Mike Lawrence Productions","headers":{},"status":"started","timestamp":"2025-06-22T00:40:50.824Z","to":"wss://gospelshare.io/socket?channel=e2d7f951a44ad6c6b7a736578fc062c9","uuid":"1517d231-df30-4665-bec5-2e4ed6eb74ed"},"timestamp":"2025-06-22T00:40:50.893Z"}
[32minfo[39m: Vonage inbound event {"body":{"conversation_uuid":"CON-dc2e6661-1205-4ccd-895e-8e17ffa99f67","direction":"outbound","from":"Esther - Mike Lawrence Productions","headers":{},"network":null,"rate":null,"start_time":null,"status":"answered","timestamp":"2025-06-22T00:40:50.824Z","to":"wss://gospelshare.io/socket?channel=e2d7f951a44ad6c6b7a736578fc062c9","uuid":"1517d231-df30-4665-bec5-2e4ed6eb74ed"},"timestamp":"2025-06-22T00:40:50.898Z"}
[32minfo[39m: Vonage inbound event {"body":{"conversation_uuid":"CON-dc2e6661-1205-4ccd-895e-8e17ffa99f67","direction":"outbound","from":"Esther - Mike Lawrence Productions","headers":{},"status":"ringing","timestamp":"2025-06-22T00:40:50.824Z","to":"wss://gospelshare.io/socket?channel=e2d7f951a44ad6c6b7a736578fc062c9","uuid":"1517d231-df30-4665-bec5-2e4ed6eb74ed"},"timestamp":"2025-06-22T00:40:50.932Z"}
[32minfo[39m: Vonage inbound event {"body":{"conversation_uuid":"CON-dc2e6661-1205-4ccd-895e-8e17ffa99f67","direction":"inbound","disconnected_by":"user","duration":"14","end_time":"2025-06-22T00:40:58.000Z","from":"13472005533","headers":{},"network":"US-UNKNOWN","price":"0.00108733","rate":"0.00466000","start_time":"2025-06-22T00:40:44.000Z","status":"completed","timestamp":"2025-06-22T00:40:57.894Z","to":"12135235700","uuid":"e2d7f951a44ad6c6b7a736578fc062c9"},"timestamp":"2025-06-22T00:40:58.188Z"}
[32minfo[39m: Inbound call ended {"callId":"e2d7f951a44ad6c6b7a736578fc062c9","duration":13481,"phoneNumber":"13472005533","status":"completed","timestamp":"2025-06-22T00:40:58.188Z","transcript":[]}
[32minfo[39m: Vonage inbound event {"body":{"conversation_uuid":"CON-dc2e6661-1205-4ccd-895e-8e17ffa99f67","direction":"outbound","disconnected_by":"platform","duration":"8","end_time":"2025-06-22T00:40:58.000Z","from":"Esther - Mike Lawrence Productions","headers":{},"network":null,"price":"0.000533","rate":"0.004000","start_time":"2025-06-22T00:40:50.000Z","status":"completed","timestamp":"2025-06-22T00:40:58.243Z","to":"wss://gospelshare.io/socket?channel=e2d7f951a44ad6c6b7a736578fc062c9","uuid":"1517d231-df30-4665-bec5-2e4ed6eb74ed"},"timestamp":"2025-06-22T00:40:58.487Z"}
[32minfo[39m: Stream established for session e2d7f951a44ad6c6b7a736578fc062c9, processing responses... {"timestamp":"2025-06-22T00:41:49.038Z"}
[31merror[39m: Error processing response stream for session e2d7f951a44ad6c6b7a736578fc062c9:  Timed out waiting for input events {"$fault":"client","$metadata":{},"name":"ValidationException","stack":"ValidationException: Timed out waiting for input events\n    at de_ValidationExceptionRes (/home/ec2-user/environment/map-20250618-mdl-rails/NovaVoice/microservice/node_modules/@aws-sdk/client-bedrock-runtime/dist-cjs/index.js:1699:21)\n    at de_ValidationException_event (/home/ec2-user/environment/map-20250618-mdl-rails/NovaVoice/microservice/node_modules/@aws-sdk/client-bedrock-runtime/dist-cjs/index.js:1969:10)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async /home/ec2-user/environment/map-20250618-mdl-rails/NovaVoice/microservice/node_modules/@aws-sdk/client-bedrock-runtime/dist-cjs/index.js:1811:30\n    at async Object.deserializer (/home/ec2-user/environment/map-20250618-mdl-rails/NovaVoice/microservice/node_modules/@smithy/eventstream-serde-universal/dist-cjs/index.js:127:37)\n    at async SmithyMessageDecoderStream.asyncIterator (/home/ec2-user/environment/map-20250618-mdl-rails/NovaVoice/microservice/node_modules/@smithy/eventstream-codec/dist-cjs/index.js:438:28)\n    at async NovaSonicBidirectionalStreamClient.processResponseStream (/home/ec2-user/environment/map-20250618-mdl-rails/NovaVoice/microservice/dist/nova-sonic-client.js:312:30)\n    at async NovaSonicBidirectionalStreamClient.initiateSession (/home/ec2-user/environment/map-20250618-mdl-rails/NovaVoice/microservice/dist/nova-sonic-client.js:210:13)\n    at async WebSocketServer.<anonymous> (/home/ec2-user/environment/map-20250618-mdl-rails/NovaVoice/microservice/dist/index.js:448:9)","timestamp":"2025-06-22T00:41:49.042Z"}
[31merror[39m: Nova Sonic error {"callId":"e2d7f951a44ad6c6b7a736578fc062c9","error":{"details":"Timed out waiting for input events","message":"Error processing response stream","source":"responseStream"},"timestamp":"2025-06-22T00:41:49.043Z"}
[32minfo[39m: ‚úÖ STEP 3 COMPLETE: Session initiated {"callId":"e2d7f951a44ad6c6b7a736578fc062c9","duration":"58261ms","timestamp":"2025-06-22T00:41:49.043Z"}
[32minfo[39m: üìù STEP 4: Setting up prompt start {"callId":"e2d7f951a44ad6c6b7a736578fc062c9","timestamp":"2025-06-22T00:41:49.043Z"}
[32minfo[39m: ‚úÖ STEP 4 COMPLETE: Prompt start set {"callId":"e2d7f951a44ad6c6b7a736578fc062c9","duration":"1ms","timestamp":"2025-06-22T00:41:49.044Z"}
[32minfo[39m: üí¨ STEP 5: Setting up system prompt {"callId":"e2d7f951a44ad6c6b7a736578fc062c9","timestamp":"2025-06-22T00:41:49.044Z"}
[32minfo[39m: ‚úÖ STEP 5 COMPLETE: System prompt set {"callId":"e2d7f951a44ad6c6b7a736578fc062c9","duration":"0ms","timestamp":"2025-06-22T00:41:49.044Z"}
[32minfo[39m: üé§ STEP 6: Setting up audio channel {"callId":"e2d7f951a44ad6c6b7a736578fc062c9","timestamp":"2025-06-22T00:41:49.044Z"}
[32minfo[39m: Setting up startAudioContent event for session e2d7f951a44ad6c6b7a736578fc062c9... {"timestamp":"2025-06-22T00:41:49.045Z"}
[32minfo[39m: Using audio content ID: 00c84107-b1d0-4289-8231-8b0115cf16e2 {"timestamp":"2025-06-22T00:41:49.045Z"}
[32minfo[39m: ‚úÖ STEP 6 COMPLETE: Audio channel ready {"callId":"e2d7f951a44ad6c6b7a736578fc062c9","duration":"0ms","timestamp":"2025-06-22T00:41:49.045Z"}
[32minfo[39m: üéâ ALL STEPS COMPLETE: Nova Sonic session fully initialized {"callId":"e2d7f951a44ad6c6b7a736578fc062c9","sessionInitTime":"58261ms","timestamp":"2025-06-22T00:41:49.045Z","totalDuration":"58263ms"}
